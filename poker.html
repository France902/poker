<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,, initial-scale=1.00, user-scalable=no, maximum-scale=1.00, minimum-scale=1.00">
    <title>Poker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #2e8b57;
            color: white;
        }
        #wrapper {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: top left;
        }
        .table {
            margin: 20px auto;
            width: 800px;
            height: 700px;
            margin-left: 550px;
            margin-top: 180px;
            background-color: #006400;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 13px solid rgb(101, 67, 33);
            position: relative;
        }
        .card {
            width: 95px;
            height: 142px;
            margin: 5px;
            background-color: white;
            color: black;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            border: 2px solid black;
        }
        .card.back {
            background-image: url('dietro_carta2.jpg');
            background-size: cover;
            background-position: center;
            border: 2px solid black;
        }
        .player-cards, .opponent-cards {
            display: flex;
            justify-content: center;
            margin: 10px;
        }
        .controls {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #228b22;
            color: white;
        }
        .hidden {
            display: none;
        }
        .left-button {
            position: absolute;
            left: -80px;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 90px;
            background-color: white;
            color: black;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        .left-button:hover {
            background-color: #f0f0f0;
        }
        .right-button {
            position: absolute;
            right: -80px;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 90px;
            background-color: white;
            color: black;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            cursor: pointer;
        }
        .right-button:hover {
            background-color: #f0f0f0;
        }
        .bottom-controls {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="wrapper">
    <div class="table hidden" id="table">
        <img src="pila_gettoni.png" alt="" style="position: fixed; width: 200px; height: 150px; margin-top: 390px; margin-left: 50px;">
        
        <img src="pila_gettoni.png" alt="" style="position: fixed; width: 200px; height: 150px; margin-top: 150px; margin-left: 520px;">
        <img src="icona_bot.jpg" alt="" style="position: fixed; width: 150px; height: 150px; margin-left: 325px; margin-top: -185px; border-radius: 20px;">
        <div class="opponent-cards" id="opponent-cards"></div>
        <img src="icona_player.png" alt="" style="position: fixed; width: 150px; height: 150px; margin-left: 325px; margin-top: 730px; border-radius: 20px;">
        <div class="player-cards" id="player-cards" ></div>
    </div>
    <div class="bottom-controls hidden" id="controls">
        <button onclick="resetGame()">Fine Gioco</button>
    </div>
</div>
    <script>
        const suits = ['♥', '♦', '♣', '♠'];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const rankValues = { 'A': 14, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 11, 'Q': 12, 'K': 13 };
        let suit, rank;
        let playerHand = [];
        let opponentHand = [];

        function startGame() {
            const startScreen = document.getElementById('start-screen');
            const table = document.getElementById('table');
            const controls = document.getElementById('controls');
            table.classList.remove('hidden');
            controls.classList.remove('hidden');
            setTimeout(() => {
                pre_flop();
            }, 3000); 
        }
        startGame();
        function pre_flop() {
            const opponentCards = document.getElementById('opponent-cards');
            const playerCards = document.getElementById('player-cards');

            suit = suits[Math.floor(Math.random() * suits.length)];
            rank = ranks[Math.floor(Math.random() * ranks.length)];
            playerHand[0] = rank;
            playerHand[1] = suit;

            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.textContent += `${playerHand[0]} ${playerHand[1]}`;
            playerCards.appendChild(cardElement);
            
            

            suit = suits[Math.floor(Math.random() * suits.length)];
            rank = ranks[Math.floor(Math.random() * ranks.length)];
            opponentHand[0] = rank;
            opponentHand[1] = suit;

            const opponentCard = drawCard();
            opponentHand.push(opponentCard);
            const opponentCardElement = document.createElement('div');
            opponentCardElement.className = 'card back';
            opponentCards.appendChild(opponentCardElement);

            setTimeout(() => {
                suit = suits[Math.floor(Math.random() * suits.length)];
                rank = ranks[Math.floor(Math.random() * ranks.length)];
                playerHand[2] = rank;
                playerHand[3] = suit;

                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.textContent += `${playerHand[2]} ${playerHand[3]}`;
                playerCards.appendChild(cardElement);

                suit = suits[Math.floor(Math.random() * suits.length)];
                rank = ranks[Math.floor(Math.random() * ranks.length)];
                opponentHand[2] = rank;
                opponentHand[3] = suit;
                
                
                const opponentCardElement = document.createElement('div');
                opponentCardElement.className = 'card back';
                
                opponentCards.appendChild(opponentCardElement);
            }, 300); 
        }
        function dealCards() {



            playerHand = [];
            opponentHand = [];
            playerCards.innerHTML = '';
            opponentCards.innerHTML = '';


            for (let i = 0; i < 5; i++) {

                const playerCard = drawCard();
                playerHand.push(playerCard);
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.textContent = `${playerCard.rank} ${playerCard.suit}`;
                playerCards.appendChild(cardElement);

                const opponentCard = drawCard();
                opponentHand.push(opponentCard);
                const opponentCardElement = document.createElement('div');
                opponentCardElement.className = 'card back';
                opponentCards.appendChild(opponentCardElement);
            }
        }

        function drawCard() {
            const suit = suits[Math.floor(Math.random() * suits.length)];
            const rank = ranks[Math.floor(Math.random() * ranks.length)];
            return { rank, suit };
        }

        function calculateHandValue(hand) {
            const rankCount = {};
            hand.forEach(card => {
                rankCount[card.rank] = (rankCount[card.rank] || 0) + 1;
            });

            const counts = Object.values(rankCount);
            if (counts.includes(4)) return { name: 'Poker', score: 7 };
            if (counts.includes(3) && counts.includes(2)) return { name: 'Full', score: 6 };
            if (counts.includes(3)) return { name: 'Tris', score: 3 };
            if (counts.filter(count => count === 2).length === 2) return { name: 'Doppia Coppia', score: 2 };
            if (counts.includes(2)) return { name: 'Coppia', score: 1 };
            return { name: 'Carta Alta', score: 0 };
        }

        function revealWinner() {
            const opponentCards = document.getElementById('opponent-cards');
            opponentCards.innerHTML = '';

            // Mostra le carte dell'avversario
            opponentHand.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.textContent = `${card.rank} ${card.suit}`;
                opponentCards.appendChild(cardElement);
            });

            // Calcola il valore delle mani
            const playerHandValue = calculateHandValue(playerHand);
            const opponentHandValue = calculateHandValue(opponentHand);

            // Determina il vincitore
            let message;
            if (playerHandValue.score === opponentHandValue.score) {
                message = `Pareggio! Entrambi avete ${playerHandValue.name}.`;
            } else if (playerHandValue.score > opponentHandValue.score) {
                message = `Hai vinto con ${playerHandValue.name}! L'avversario aveva ${opponentHandValue.name}.`;
            } else {
                message = `Hai perso! L'avversario ha ${opponentHandValue.name}, mentre tu hai ${playerHandValue.name}.`;
            }

            alert(message);
        }

        function resetGame() {
            const table = document.getElementById('table');
            const opponentCards = document.getElementById('opponent-cards');
            const playerCards = document.getElementById('player-cards');
            const startScreen = document.getElementById('start-screen');
            const controls = document.getElementById('controls');

            // Resetta il tavolo e torna alla schermata iniziale
            playerCards.innerHTML = '';
            opponentCards.innerHTML = '';
            startScreen.classList.remove('hidden');
            table.classList.add('hidden');
            controls.classList.add('hidden');
        }

        
    </script>
    <script>
    function scalePage() {
        const baseWidth = 1920; 
        const baseHeight = 1080;

        const scaleX = window.innerWidth / baseWidth;
        const scaleY = window.innerHeight / baseHeight;
        const scale = Math.min(scaleX, scaleY);

        const wrapper = document.getElementById('wrapper');
        wrapper.style.transform = `scale(${scale})`;
    }

    window.addEventListener('resize', scalePage);
    window.addEventListener('load', scalePage);
    </script>
</body>
</html>
